<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/_MainLayout}">
<head>
  <title layout:fragment="title">Reserva</title>
</head>
<body>
<section layout:fragment="content">

  <h2 th:text="'Reserva - ' + ${#strings.capitalize(action)}"></h2>

  <!-- CREATE -->
  <form th:if="${action == 'create'}"
        th:action="@{/cliente/reservas}"
        th:object="${reserva}" method="post">

    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <input type="hidden" th:field="*{reservaId}"/>
    <input type="hidden" th:field="*{fechaReserva}"/>

    <!-- Cliente (readonly) -->
    <div class="mb-3">
      <label>Cliente</label>
      <input class="form-control"
             th:value="${reserva.cliente != null && reserva.cliente.usuario != null
                        ? ( #strings.isEmpty(reserva.cliente.usuario.name)
                            ? reserva.cliente.usuario.email
                            : reserva.cliente.usuario.name )
                        : 'Cliente'}"
             readonly>
    </div>

 <div class="mb-3">
  <label for="paqueteSel">Paquete</label>
  <select id="paqueteSel" class="form-select" th:field="*{paquete.paqueteId}" required>
    <option value="">Seleccione</option>
    <option th:each="p : ${paquetes}"
            th:value="${p.paqueteId}"
            th:text="${(p.nombre != null && !#strings.isEmpty(p.nombre) ? p.nombre : 'Paquete ' + p.paqueteId)
                       + ' â€” $' + #numbers.formatDecimal(p.precio,1,2)}">
    </option>
  </select>
</div>





    <!-- Fecha visible (si la quieres editable, descomenta):
    <div class="mb-3">
      <label>Fecha de Reserva</label>
      <input type="datetime-local" th:field="*{fechaReserva}" class="form-control">
    </div>
    -->

    <button type="submit" class="btn btn-primary">Guardar</button>
    <a th:href="@{/cliente/destinos}" class="btn btn-secondary">Cancelar</a>
  </form>

</section>
</body>
</html>